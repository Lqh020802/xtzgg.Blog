---
title: 09. 菜单的创建和基本使用
icon: simple-icons:electron
---

# 09. 菜单的创建和基本使用



例

自定义菜单
- 修改一个应用的菜单栏，需要使用到`Menu`模块


在根目录下创建`main`文件夹，主要用来存放修改菜单栏所需的文件


![](data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEAkACQAAD//gAUU29mdHdhcmU6IFNuaXBhc3Rl/9sAQwADAgIDAgIDAwMDBAMDBAUIBQUEBAUKBwcGCAwKDAwLCgsLDQ4SEA0OEQ4LCxAWEBETFBUVFQwPFxgWFBgSFBUU/9sAQwEDBAQFBAUJBQUJFA0LDRQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQU/8AAEQgAPQEQAwEiAAIRAQMRAf/EAB8AAAEFAQEBAQEBAAAAAAAAAAABAgMEBQYHCAkKC//EALUQAAIBAwMCBAMFBQQEAAABfQECAwAEEQUSITFBBhNRYQcicRQygZGhCCNCscEVUtHwJDNicoIJChYXGBkaJSYnKCkqNDU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6g4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2drh4uPk5ebn6Onq8fLz9PX29/j5+v/EAB8BAAMBAQEBAQEBAQEAAAAAAAABAgMEBQYHCAkKC//EALURAAIBAgQEAwQHBQQEAAECdwABAgMRBAUhMQYSQVEHYXETIjKBCBRCkaGxwQkjM1LwFWJy0QoWJDThJfEXGBkaJicoKSo1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoKDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uLj5OXm5+jp6vLz9PX29/j5+v/aAAwDAQACEQMRAD8A/P0cmt/xp4E1v4f6nFYa3Z/ZpZoEuYJEkWWKeJxlXjkUlXU+qk8gjtXP16l4D+JGk6j4a/4Qfx8Li58MBmk07UrdPMu9GmPVogT80TH78WcHqMEc+m7203/r8fz27HOrX12/r+vxOO8NeAdb8W6ZrWpadaB9P0e2N1e3c0ixRRL2XcxALseFUcnsK56vSPib8ULbXNOtfCfhS1k0fwNprlre1Y/vr2Xobm5I+9I3YdFHArzepTvr0/r+rffrs7WVnv8A1p/wfu039m8C/s3XviLwfceINevtR8MwpeiyitzoNzdyykx7w4SMbgmMjdjGR15FekfDL4P+CvA11q19ql3feJ72WzaCwh1DwTqD2sErEfvXjKHeRgADI6t7EfS37KXjT/hN/gX4bnkk8y6sIjps+TkhoflXJ9Snln8a9cr86xmcYhVKlGatZtWTts/S/wCPU+roYCk4RqR7dV/wbHwv4/0Tw7N8I/Hcn9n+Hv7UsrO2ntzZeDp9HuIQ11GjOHm+8CCV+X1r5Hr9Mf2wNJif4IeKtTwBPHZxWxOOWVry3YfkVP5mvzOr6XJK3t6Ep+fr0R5GY0/ZVIx8v1L2l6FqWuO6abp91qDoMutrA0pUep2g4rd8Z6Bb6PYeGDb2zQ3N5p4luFJYs0vmuvQng4AGBjpWxdrqifDDw5/YgufsslxcG+NnuybgONgk2/7GMZ967eEXDeM/BX9tCWXVV0GQosjATG4Hm7BlgQJPTIPzdea+vVFWcfNa/JvT+v8AI8bm1v5P80jxXU/D+qaKkTajpt5YLL/qzdQPGH+m4DNSf8ItrPk3E39kX/lW6h5pPsz7Y1KhgWOOAQQeexzXba3rkFv4W1zT/wCy/ErG5eNnl1icSpbyq+d3+rUhiMr15zW9Jr1+vxs8P2a3Uq2ipZQeQGIRkeBNwK9Dncf09KUaEW1G+7S+9N/p0G5WTfb/ADS/U8muNB1O00+K/n067hsZsCO5kgZYnz0wxGD+FSab4Z1jWLd57DSb6+gQ4aW2tnkVT7kAgV3Oi6teaxF8Q4by5luITYyS+U7EorJMmwgdBjoMdBS+Nv8AhIBfaB/YP27+yPsNv/Z39n79m/YN+Nv8fmbs9+mahU4uKmr2dvXW/wDkU7ptdr/hb/M4XRP7IjuZf7aS+eJVwkdkyIxbPdmBwMZ7GtXxh4d07TNP0bVdJmuW0/U45GWG82+dEyNtYErgMM9CAK3fHMlzbfEG9vrDTodRuIIoVvg1otzALhogJNy4K53bvxBqL4jrJfaB4e1bULU6Zq9wJYmshuVPIQjZIkbH92CSwwMA4yB1olFKm+6e/wA2t+t/y1Et/l+ifyPP6KKK5igooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiir01tGmiWlwFxNJcTRs2TyqrEQMfVm/OhK4FGiiigDoPD/wAQvFPhKze00PxLrGjWjyGV4NPv5YEZyACxVGAJwoGfYelaf/C6viH/AND54m/8HFx/8XXGUVi6NKTu4Jv0X+Roqk0rKT+9/wCZ1Gr/ABS8Z6/p02n6p4u17UrCYAS2t3qc0sUgBBG5WYg4IB57gVy9FFXGEYK0Ul6K35EuTlrJ3L+ma9qeieb/AGdqN3YeaMSfZZ2j3j32kZqG41O8ujAZ7ueYwDbEZJC3ljOcLk8DJJ47mq1Facz7kmnqXibWNagWHUNWvr6FDlY7m5eRQfYMTVc6vfm/jvje3H22PbsufNbzF2gBcNnIwAAPTFVKKLve4FiHUbu3+0eVdTR/aFKTbJCPNUnJDeoyM4NWtP8AE2saTavbWOq31lbuSXht7l40bPXIBwazaKE2tgL2ma5qWiSvLp2oXVhK4wz2szRsw9CVIzUN9f3Wp3L3N5czXdw/3pZ3Lu31J5NV6KLt6AFFFFIAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACtO4/5Fqw/6+7j/wBAhrMrTuP+RasP+vu4/wDQIapdRGZXqGtfDPSvEPw/i8XeBpri7j0+BE1/Rrpw91YSYwbhcAb4GPO4D5T146eX17l8HNP/AOFNWFt8UfEdxPZwyJJFouhxPsm1piMNvB6Woz8zEfNwBk4znL4W9v62+f8AwejGt1/X9W7/AOZ4bVvStNm1nVLPT7fb591MkEe84G5mCjJ9Mmm6le/2lqN1d+RDa+fK8vkWy7Yo9xJ2oOyjOAPQVrfD/wD5Hzw3/wBhK2/9GrUTk403Lqk3+DLik5qPS/6nqX/DHvjv/ntpH/gU/wD8RXpl1+zHYaVbafa2fhOw16SO2QXV/ea1c2rSz/xlY0UgL6c98dsn6Lor8oq59jatuZpW7XX32Z9vDLMNC9l9+v5o/Pf46eE7DwT8RbvSdNsxYW0UEDm3WZ5QjtErMA7ckZJ615/Xrv7VX/JadX/642//AKKWsv8AZv8A+S6eC/8AsIL/ACNfp+WuVbDUXJ6tLX5HxGYzWGlWmlpG7t6Hm1FfVHgX4ra14ltfinDqa2d9Y6BZS6no9lPaRtDp88UpETRrt/hyOuc45zk5wprjXvjd8KPBt9f/AGfWfFa+LjpFtdXsajzIWhWXZKQPmQN19s13wi5pOPVRfyk7feeQ8ZKEpKpFJJ2bv/dcl026Ps+6PnStrxB/wj32TSf7D/tP7T9lH9pf2h5ez7RnnydnPl46bua+qJtWPi3wh8TtG1fxtH40bTdGuLk6bBoZtrTTbiFvkMMpxjBBUAL8wGc8HOR4KYJ8YPgazKHUeEMlT3+S84pqPN100f4Sf/tv5GX15u7cdYqWl97Ri+qT69bW31ufKlFfQ/g34gaz8Wvh38TdK8Ryw3enafpH9pafbJbpHHYyRyDaIQoG0YO3Hp65Ofnioejt5J/ff/I9CjVdRyjJWcXbe/RPy7hRRRQdIUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABWncf8i1Yf9fdx/6BDWZWncf8i1Yf9fdx/wCgQ1S6iMytLXfEuq+KLmC41fUbnUp4II7WKS5lLlIkGEQZ6ADt9T1NZtFSMKnsL6fTL63vLaTyrm3kWWKQAHa6nIODxwQKgopNJqzDbU9N/wCGlfiT/wBDNJ/4CQf/ABuj/hpX4k/9DNJ/4CQf/G68yorh+oYT/nzH/wABX+R0/Wq//Px/ezW8UeKtV8aazLqus3ZvdQlVVeYoqEhRgcKAOgHao/DfiPUfCOu2Ws6TcfZNSs5BLBPsV9jDvtYEH8RWbRXbCKppRgrJdjmn+8vz633v1N7SfHGt6GuuLZXvkDW4Htr/APdI3nRsdzLyp25PdcGn6b4/8QaPotnpNlqT2tjZ6iNWgSJFDR3QUKJA+N33QBjOPaueoq03Hby/Db7jN04SveK1/wArfloejav+0N8QNctb+2vNf329/by2t1FHZW8SzpJjfuCRjLHH3/vDnBGTnDs/ij4n0/V9D1S31Py77RLP7BYS/Z4j5MGHGzBXDcSPywJ568CuVopXf9fP/N/eQqFKKtGCXyNnQPGGr+F7TVrbTLv7NBqtqbK8Xy0fzYSclcsCV6dVwfesaiig1UUm2luFFFFBQUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFAH/9k=)

- 新建`menu.js`文件，输入以下代码：


```javascript
const { Menu } = require("electron"); // 引入模块

var template = [
  {
    label: "菜单一",
    submenu: [
      {
        label: "子菜单1",
      },
      {
        label: "子菜单2",
      },
    ],
  },
  {
    label: "菜单二",
    submenu: [
      {
        label: "子菜单1",
      },
      { label: "子菜单2" },
    ],
  },
];
var m = Menu.buildFromTemplate(template)
Menu.setApplicationMenu(m)


- 在`main.js`中，引入`menu.js`


```javascript
// 主进程
const { app, BrowserWindow } = require("electron");
const createWindow = () => {
  const mainWindow = new BrowserWindow({
    width: 800, // 控制打开窗口的宽高
    height: 600,
    webPreferences: {
      nodeIntegration: true, // 渲染进程支持node
      contextIsolation: false, // 关闭上下文隔离 默认为true
      // 开启remote
      enableRemoteModule: true,
    },
  });
  mainWindow.loadFile("index.html"); // 读取渲染进程
  mainWindow.webContents.openDevTools();
  require('./main/menu.js') // 主要在于这一行
  
  require("@electron/remote/main").enable(mainWindow.webContents)
  require('@electron/remote/main').initialize() // 初始化Remote模块
};

app.whenReady().then(() => {
  // Electron 初始化完成调用createWindow()
  createWindow();
});

注意

`Menu`属于是主线程下的模块，所以只能在主线程中使用，这个要记清楚。
```

![](/Electron/菜单.jpg)

例

菜单的基本使用
- 

现在我们点击自定义菜单是没有任何反应的，那么该如何让自定义菜单具有功能呢？比如：点击自定义菜单后弹出一个新的`Electron`窗口。

有个自定义菜单之后，我们可以在菜单中添加`click`事件，让菜单具有简单的功能


```javascript
const { Menu, BrowserWindow } = require("electron");

var template = [
  {
    label: "菜单一",
    submenu: [
      {
        label: "子菜单1",
        click: () => {
          var win = new BrowserWindow({
            width: 600,
            height: 400,
            webPreferences: { nodeIntegration: true }
          })
          win.loadFile('yellow.html')
          win.on('closed', () => {
            win = null
          })
        }
      },
      {
        label: "子菜单2",
      },
    ],
  },
  {
    label: "菜单二",
    submenu: [
      {
        label: "子菜单1",
      },
      { label: "子菜单2" },
    ],
  },
];
var m = Menu.buildFromTemplate(template)
Menu.setApplicationMenu(m)


![](/Electron/13.jpg)


添加快捷键

```javascript
const { Menu, BrowserWindow } = require("electron");

var template = [
  {
    label: "菜单一",
    submenu: [
      {
        label: "子菜单1",
        accelerator: 'ctrl+n', // 添加这一个属性就可以绑定快捷键了
        click: () => {
          var win = new BrowserWindow({
            width: 600,
            height: 400,
            webPreferences: { nodeIntegration: true }
          })
          win.loadFile('yellow.html')
          win.on('closed', () => {
            win = null
          })
        }
      },
      {
        label: "子菜单2",
      },
    ],
  },
  {
    label: "菜单二",
    submenu: [
      {
        label: "子菜单1",
      },
      { label: "子菜单2" },
    ],
  },
];
var m = Menu.buildFromTemplate(template)
Menu.setApplicationMenu(m)
```

![](/Electron/快捷键.jpg)